# 電子商務進階架構

對於更多得電子商務架構，進階項目莫過於『結帳』

『結帳』這件事情，影響到計算原則。



大家可以將路邊所有 DM 蒐集起來，或者找到目前所有大型百貨公司的行銷手法可以蒐集起來，

## 折扣基本種類

折扣大部分可以分成底下幾種，

 * 商品折扣
 * 館別折扣
 * 特別商品折扣
 * 商品滿額折扣
 * 滿額免運

## 加價購

基本款分為滿額加價購，非滿額加價購。

更麻煩的部分就是綁定商品加價購，綑綁出售加價購等類型。
 
## 優惠碼

基本分為特定與不特定，可重複使用，不能重複使用，綁定使用者。

還有包含期間限定與非期間限定，針對會員生日，第一次加入的特別優惠碼。

## 綜合考量

對於以上幾種不同特性，都會有不同計算方式和規則，有些可以重複使用，有些不能重複使用，有些在架構上可以堆疊計算，基於規劃及架構上有些不行。

最麻煩的部分就是驗證，特別是這段雖然『只是單純的金額』可是在許多不同計算下會顯的更為複雜，這也就是為什麼很多金流及計算都會是獨立一個單位進行試算與推演。

## 訂單回推

以上為商品購買時的金額計算，特別要提醒就是『回推』

『訂單回推』會是另外一個有趣的議題，相信商品在不同時期可能會有不同計算方式調整，如果是採用一般『Table join』 的關連方式，到時候回推肯定會發生大災難。

這是比較外顯的一般問題，也是在一開始進行折扣規劃時不會考慮到的細節。

## 後記

這也就是為什麼 eCommerce 會對於客戶來說覺得簡單，但是從深入的角度來看， 電子商務也是一件不簡單的事情，光從金流來看就不是這麼簡單。

而這整件事情，絕對不會只是加加減減這麼一回事而已，但我必須說，如果一間技術公司都可以把『電子商務』架構做到很好，那基本上市面上 75% 的網站類型都可以很棒的處理完畢。